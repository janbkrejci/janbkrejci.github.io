
<html lang="cs">
  <head>
   <meta charset="UTF-8">
   <title>Ukázkový formulář</title>
   <script id="mojeid-connect-script" src="https://www.mojeid.cz/public/media/1542958574/150/"
     data-jsrsasign="https://www.mojeid.cz/public/media/1542956522/149/"></script>
   <script>
     document.addEventListener("DOMContentLoaded", function () {
 
       function parseClaims(clientClaims) {
         var claims = {}
         for (var name in clientClaims) {
             claims[clientClaims[name][0]] = {'essential': clientClaims[name][1]}
         }
         return claims
       }
 
       function fillForm(uiDict) {
         for (var field_name in uiDict) {
           var nodes = document.querySelectorAll(
                 "input[name=" + field_name + "], " +
                 "select[name=" + field_name + "], " +
                 "textarea[name=" + field_name + "]"
             )
             if (nodes.length) {
                 this.setValueToElements(nodes, this.decodeValue(uiDict[field_name]))
             }
         }
       }
 
       var mojeID = createMojeidConnect({
         clientName: "Ukázkový formulář",
         parseClaimsCallback: parseClaims,
         formCallback: fillForm,
         claims: [
             ['given_name', true],
             ['family_name', true],
             ['email', true],
             ['phone_number', true],
             ['nickname', false],
             ['address', false],
             ['birthdate', false],
             ['gender', false],
             ['website', false],
             ['profile', false]
         ],
         registrationSuccessCallback: function () {
           document.getElementById("button-prefill").removeAttribute("disabled");
           document.getElementsByClassName("error-message")[0].textContent = "";
         },
         registrationFailureCallback: function () {
           document.getElementsByClassName("error-message")[0].textContent = "Registrace klienta se nezdařila.";
         }
       });
       document.getElementById("button-prefill").addEventListener("click", mojeID.requestAuthentication.bind(mojeID));
     });
   </script>
   <style>
     .button-frame {
         margin-top: 1em;
         margin-left: 11em;
     }
     form div {
         margin-bottom: 0.6em;
     }
     form label {
         /* To make sure that all labels have the same size and are properly aligned */
         display: inline-block;
         width: 10em;
         text-align: right;
         margin-right: 1em;
     }
     .error-message {
       color: red;
     }
     label:not(.required) {
       position: relative;
       left: -1em;
     }
     label.required:after {
       content: " *";
       color: red;
       font-size: 120%;
       font-weight: bold;
     }
     form label {
       vertical-align: top;
     }
   </style>
  </head>
  <body>
   <h1>Předvyplnění ukázkového formuláře</h1>
   <form>
     <div><label class="required">Jméno:</label><input type="text" name="given_name"/></div>
     <div><label class="required">Příjmení:</label><input type="text" name="family_name"/></div>
     <div><label class="required">Email:</label><input type="text" name="email"/></div>
     <div><label class="required">Telefon:</label><input type="text" name="phone_number"/></div>
     <div><label>Adresa:</label><textarea cols="25" rows="5" name="address"></textarea></div>
     <div><label>Datum narození:</label><input type="date" name="birthdate"/></div>
     <div>
       <label>Pohlaví:</label>
       <input type="radio" name="gender" value="F"/> Ženské
       <input type="radio" name="gender" value="M"/> Mužské
     </div>
     <div><label>Přezdívka:</label><input type="text" name="nickname"/></div>
     <div><label>Web:</label><input type="text" name="website"/></div>
     <div><label>Osobní stránka:</label><input type="text" name="profile"/></div>
     </form>
    
   <div class="button-frame">
     <button id="button-prefill" disabled>Předvyplnit pomocí mojeID</button>
     <p class="error-message">Probíhá registrace klienta...</p>
   </div>
   <noscript>
     <p class="error">Pro předvyplnění formuláře je nutné mít zapnutý javascript.</p>
   </noscript>
 </body>
 </html>
 